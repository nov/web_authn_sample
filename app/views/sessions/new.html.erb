<header>
  <h2>Password-less Login</h2>
</header>
<%= form_tag session_path, id: 'authentication_form' do %>
  <p><%= hidden_field_tag :client_data_json %></p>
  <p><%= hidden_field_tag :authentication_data %></p>
  <p><%= submit_tag 'Login' %></p>
<% end %>
<hr>
<p>or not yet registered?</p>
<%= form_tag account_path, id: 'registration_form' do %>
  <p><%= email_field_tag :email, params[:email], placeholder: 'email', required: true %>
  <p><%= hidden_field_tag :client_data_json %></p>
  <p><%= hidden_field_tag :authentication_data %></p>
  <p><%= submit_tag 'Sign-up' %></p>
<% end %>

<script src="/web-authn.js"></script>
<script>
  const challenge = "<%= session[:challenge] %>";
  authentication_form.addEventListener('submit', password_less.authenticate);
  registration_form.addEventListener('submit', password_less.regsiter);
</script>